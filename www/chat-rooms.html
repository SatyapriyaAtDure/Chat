<html>
<title>PubNub ChatEngine</title>

<head>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    </link>
    <link rel="stylesheet" type="text/css" href="css/chat.css">
    </link>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    </link>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body class="chat-rooms-page">
    <div class="center-content">
        <div class="inner-content">
            <div class="container clearfix">
                <div class="select-user">
                    <span class="select-who">I am:</span>
                    <select>
                        <option val=''>Select option</option>
                        <option val='satya' data-id='100' data-name="satya" data-first="satya">Satya</option>
                        <option val='manoj' data-id='101' data-name="manoj" data-first="manoj">Manoj</option>
                        <option val='ayaz' data-id='102' data-name="ayaz" data-first="ayaz">Ayaz</option>
                        <option val='rajesh' data-id='103' data-name="rajesh" data-first="rajesh">Rajesh</option>
                        <option val='shital' data-id='104' data-name="shital" data-first="shital">Shital</option>
                        <option val='sabyasachi' data-id='105' data-name="sabyasachi" data-first="sabyasachi">Sabyasachi</option>
                    </select>
                </div>
                <div class="people-list hide" id="people-list">
                    <ul class="list">
                    </ul>
                </div>
                <div class="user-list">
                    <ul class="list-item">
                        <li class="item" data-roomname="start-club">Start Club</li>
                        <!-- <li class="item" data-roomname="chat-engine-demo-room2">chat-engine-demo-room2</li>
                            <li class="item" data-roomname="chat-engine-demo-room3">chat-engine-demo-room3</li> -->
                    </ul>
                </div>
                <li class="item one-to-one">Peer Chat</li>
                <!-- end chat -->
            </div>
        </div>
    </div>

    <!-- end container -->

    <script>
        localStorage.clear();
        $('select').val('');
        $(".list-item li").on('click', function () {
            if ($('select').val()) {
                console.log("item clicked");
                localStorage.setItem('selectedChatRoom', $(this).data().roomname);
                localStorage.setItem('chatType', 'group');
                // window.location.href = 'chat.html';
                window.location.href = 'fire-chat.html';
            } else {
                alert("select who you are");
            }
        })

        $(".one-to-one").on('click', function () {
            if ($('select').val()) {
                localStorage.setItem('chatType', 'peer');
                window.location.href = 'peer-users.html';
            } else {
                alert("select who you are");
            }
        })
        var currentUser = {};
        $(".select-user select").on('change', function () {
            currentUser.id = $(this).find(':selected').attr('data-id');
            currentUser.uuid = $(this).find(':selected').attr('data-id');
            currentUser.name = $(this).find(':selected').attr('data-name');
            currentUser.first = $(this).find(':selected').attr('data-first');
            console.log("select...", currentUser);
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
        })
    </script>
</body>

</html>